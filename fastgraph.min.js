function fit(t,a,e,r,o){return r+(t-a)*(o-r)/(e-a)}function graph(t,a,e,r){var o={graphAverage:!1,graphTrend:!1,rotateYAxisLabels:20,labelReductionFactor:1,fillArea:!1,graphColor:"#ccc",areaFillColor:"rgba(63,81,181,0.1)",verticalBarColor:"#cccccc",xLabelColor:"#888888",yLabelColor:"#222222"},l=t.getContext("2d"),i={default:l.canvas.height/10};0!=l.canvas.clientWidth&&(l.canvas.width=1.6*l.canvas.clientWidth),0!=l.canvas.clientHeight&&(l.canvas.height=1.6*l.canvas.clientHeight);var n={x:l.canvas.width,y:l.canvas.height},h={bottom:l.canvas.height/8,top:l.canvas.height/4,left:l.canvas.width/64,right:l.canvas.width/16};!function(t,a,e){function r(t,a,e,r,l,n){void 0==l&&(l=0),void 0==n&&(n="");var h,c={min:Math.min(...t),max:Math.max(...t)};for(var f in t)t.hasOwnProperty(f)&&(0!=f&&t[f]!=c.max&&t[f]!=c.min||t[f]!=h&&(e.fillStyle=r,e.font=i.default+"px Arial",e.save(),e.translate(s[f]+l,.95*a[f]),e.rotate(-o.rotateYAxisLabels*(Math.PI/180)),e.fillText(n+" "+t[f].niceDisplay(),0,0),e.restore(),h=t[f]))}var c=t.scaleBetween(n.y-h.bottom-h.top/2,h.top),s=[...Array(t.length).keys()].scaleBetween(h.left,n.x-h.right);l.beginPath(),o.fillArea?l.moveTo(h.left,n.y-h.bottom):l.moveTo(h.left,c[0]);for(y=0;y<t.length;y++)l.lineTo(s[y],c[y]);if(o.fillArea?(l.lineTo(n.x-h.right,n.y-h.bottom),l.closePath(),l.fillStyle=e,l.fill()):(l.strokeStyle=o.graphColor,l.stroke()),o.graphAverage){var f=c.average(),v=t.average();for(l.beginPath(),l.moveTo(h.left,f[0]),y=0;y<t.length;y++)l.lineTo(s[y],f[y]);l.strokeStyle="#222299",l.stroke(),r(v,f,l,"#222299",50,"AVG")}r(t,c,l,o.yLabelColor);for(var g=0,p=Math.round(fit(t.length,0,80,1,o.labelReductionFactor)),y=0;y<t.length;y++)g!=p&&0!=y||(g=0,l.fillStyle=o.verticalBarColor,l.fillRect(s[y],n.y-h.bottom,1,h.bottom+-(n.y-c[y])),l.fillStyle=o.xLabelColor,l.fillText(a[y],s[y],n.y-h.bottom/2)),g++}(a,e,o.areaFillColor)}Array.prototype.scaleBetween=function(t,a){var e=Math.max.apply(Math,this),r=Math.min.apply(Math,this);return this.map(function(o){return(a-t)*(o-r)/(e-r+1e-7)+t})},Number.prototype.niceDisplay=function(){return this>=1e6?Math.round(this/1e5)/10+" M":this>1e3?Math.round(this/100)/10+" K":Math.round(10*this)/10},Array.prototype.average=function(){var t=0,a=0;for(var e in this)this.hasOwnProperty(e)&&(t+=this[e],a++);return this.map(function(){return t/a})},Array.prototype.toFloat=function(){return this.map(function(t){return parseFloat(t)})};