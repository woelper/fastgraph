function fit(t,e,a,o,i){return o+(t-e)*(i-o)/(a-e)}function fastgraph(t,e,a,o){if(void 0!=t){var i=t.getContext("2d"),r=i.canvas.getBoundingClientRect(),n={labelReductionFactor:1,labelMaxLength:6,showAverage:!1,showTrend:!1,showVerticalBars:!1,fillArea:!1,yAxisLabelRotation:0,xAxisLabelRotation:20,fontSize:void 0,graphColor:"#aaa",areaFillColor:"rgba(63,81,181,0.1)",verticalBarColor:"#cccccc",xLabelColor:"#888",yLabelColor:"#888",lineWidth:1.5*devicePixelRatio};void 0!==o&&(n=Object.assign(n,o)),i.canvas.width=Math.round(devicePixelRatio*r.right)-Math.round(devicePixelRatio*r.left),i.canvas.height=Math.round(devicePixelRatio*r.bottom)-Math.round(devicePixelRatio*r.top),i.canvas.style.width.includes("%")||(i.canvas.style.width=Math.round(i.canvas.width/devicePixelRatio)+"px"),i.canvas.style.height.includes("%")||(i.canvas.style.height=Math.round(i.canvas.height/devicePixelRatio)+"px"),void 0===n.fontSize?n.fontSize=fit(devicePixelRatio,1,4,12,50):n.fontSize*=devicePixelRatio;var l={x:i.canvas.width,y:i.canvas.height},s={bottom:l.y/8,top:l.y/4,left:l.x/32,right:l.x/32};!function(t,e,a){function o(t,e,a,o,i,r){void 0==i&&(i=0),void 0==r&&(r="");var l,s={min:Math.min(...t),max:Math.max(...t)};for(var c in t)t.hasOwnProperty(c)&&(0!=c&&t[c]!=s.max&&t[c]!=s.min||t[c]!=l&&(a.fillStyle=o,a.font=n.fontSize+"px Arial",a.save(),a.translate(h[c]+i,.95*e[c]),0!=n.yAxisLabelRotation&&a.rotate(-n.yAxisLabelRotation*(Math.PI/180)),a.fillText(r+" "+t[c].niceDisplay(),0,0),a.restore(),l=t[c]))}if(t.constructor===Array)if(e.constructor===Array){var r=t.scaleBetween(l.y-s.bottom-s.top/2,s.top),h=[...Array(t.length).keys()].scaleBetween(s.left,l.x-s.right);i.beginPath(),n.fillArea?i.moveTo(s.left,l.y-s.bottom):i.moveTo(s.left,r[0]);for(var c=0;c<t.length;c++)i.lineTo(h[c],r[c]);if(n.fillArea?(i.lineTo(l.x-s.right,l.y-s.bottom),i.closePath(),i.fillStyle=a,i.fill()):(i.strokeStyle=n.graphColor,i.lineWidth=n.lineWidth,i.stroke()),n.showAverage){var v=r.average(),f=t.average();i.beginPath(),i.moveTo(s.left,v[0]);for(var d=0;d<t.length;d++)i.lineTo(h[d],v[d]);i.strokeStyle="#222299",i.stroke(),o(f,v,i,"#222299",50,"AVG")}if(o(t,r,i,n.yLabelColor),void 0!=e)for(var y=0,u=Math.round(fit(t.length,0,80,1,n.labelReductionFactor)),g=0;g<t.length;g++)if(void 0!=e[g]){var x=String(e[g]);y!=u&&0!=g||(y=0,n.showVerticalBars&&(i.fillStyle=n.verticalBarColor,i.fillRect(h[g],l.y-s.bottom,1,s.bottom+-(l.y-r[g]))),i.fillStyle=n.xLabelColor,i.fillText(x.substring(0,n.labelMaxLength),h[g],l.y-s.bottom/2)),y++}}else console.warn(e,"is not an array");else console.warn(t,"is not an array")}(e,a,n.areaFillColor)}else console.warn("canvas element must be valid")}Array.prototype.scaleBetween=function(t,e){var a=Math.max.apply(Math,this),o=Math.min.apply(Math,this);return this.map(function(i){return(e-t)*(i-o)/(a-o+1e-7)+t})},Number.prototype.niceDisplay=function(){return this>=1e6?Math.round(this/1e5)/10+" M":this>1e3?Math.round(this/100)/10+" K":Math.round(10*this)/10},Array.prototype.average=function(){var t=0,e=0;for(var a in this)this.hasOwnProperty(a)&&(t+=this[a],e++);return this.map(function(){return t/e})},Array.prototype.toFloat=function(){return this.map(function(t){return parseFloat(t)})};